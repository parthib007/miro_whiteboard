(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3203)}])},6724:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{r:function(){return i}});var o,i=function(e){if(Array.isArray(e))return r(e)}(o=Object.values({PURPLE:"#6B32F3",BLUE:"#408FF8",RED:"#F32D27",GREEN:"#6FCB12",GOLD:"#A89D6C",PINK:"#EB29DA",MINT:"#19CB87",RED_LIGHT:"#ED7878",CYAN:"#02CBF6",RED_DARK:"#BA1555",ORANGE:"#FF7300"}))||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},2782:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var r=(0,n(3264).io)()},7541:function(e,t,n){"use strict";n.d(t,{NW:function(){return r.NW},u4:function(){return r.u4},bo:function(){return r.bo},av:function(){return r.av}});n(5875);var r=n(3290)},5875:function(e,t,n){"use strict";n.d(t,{p:function(){return o},X:function(){return i}});var r=n(2804),o={id:"",users:new Map,usersMoves:new Map,movesWithoutUser:[],myMoves:[]},i=(0,r.cn)({key:"room",default:o})},3290:function(e,t,n){"use strict";n.d(t,{av:function(){return y},NW:function(){return d},bb:function(){return m},u4:function(){return v},bo:function(){return h}});var r=n(2804),o=n(6724),i=n(5875);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,s=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){s=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}var d=function(){return(0,r.sJ)(i.X)},m=function(){return(0,r.Zl)(i.X)},v=function(){var e=(0,r.Zl)(i.X);return function(t){e(a({},i.p,{id:t}))}},h=function(){var e=(0,r.Zl)(i.X);return{handleAddUser:function(t,n){e((function(e){var r,i=e.users,u=e.usersMoves,s=function(e){var t=o.r.findIndex((function(t){return t===e}));return-1===t?o.r[0]:o.r[(t+1)%o.r.length]}(null===(r=l(i.values()).pop())||void 0===r?void 0:r.color);return i.set(t,{name:n,color:s}),u.set(t,[]),a({},e,{users:i,usersMoves:u})}))},handleRemoveUser:function(t){e((function(e){var n=e.users,r=e.usersMoves,o=r.get(t);return n.delete(t),r.delete(t),a({},e,{users:n,usersMoves:r,movesWithoutUser:l(e.movesWithoutUser).concat(l(o||[]))})}))},handleAddMoveToUser:function(t,n){e((function(e){var r=e.usersMoves,o=e.usersMoves.get(t);return r.set(t,l(o||[]).concat([n])),a({},e,{usersMoves:r})}))},handleRemoveMoveFromUser:function(t){e((function(e){var n=e.usersMoves,r=e.usersMoves.get(t);return null===r||void 0===r||r.pop(),n.set(t,r||[]),a({},e,{usersMoves:n})}))}}},y=function(){var e=c((0,r.FV)(i.X),2),t=e[0],n=e[1];return{handleAddMyMove:function(e){n((function(t){var n;return"select"===(null===(n=t.myMoves[t.myMoves.length-1])||void 0===n?void 0:n.options.mode)?a({},t,{myMoves:l(t.myMoves.slice(0,t.myMoves.length-1)).concat([e])}):a({},t,{myMoves:l(t.myMoves).concat([e])})}))},handleRemoveMyMove:function(){var e=l(t.myMoves),r=e.pop();return n((function(t){return a({},t,{myMoves:e})})),r},myMoves:t.myMoves}}},100:function(e,t,n){"use strict";var r=n(5893),o=n(8193),i=n(1513);t.Z=function(e){var t=e.id,n=(0,i.d)().closeModal;return(0,r.jsxs)("div",{className:"relative flex flex-col items-center rounded-md bg-white p-10 ",children:[(0,r.jsx)("button",{onClick:n,className:"absolute top-5 right-5",children:(0,r.jsx)(o.oHP,{})}),(0,r.jsxs)("h2",{className:"text-lg font-bold",children:['Room with id "',t,'" does not exist or is full!']}),(0,r.jsx)("h3",{children:"Try to join room later."})]})}},3203:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(5893),o=n(7294),i=n(1163),u=n(2782),s=n(1513),a=n(7541),c=n(100),l=function(){var e=(0,s.d)().openModal,t=(0,a.u4)(),n=(0,o.useState)(""),l=n[0],f=n[1],d=(0,o.useState)(""),m=d[0],v=d[1],h=(0,i.useRouter)();(0,o.useEffect)((function(){document.body.style.backgroundColor="white"}),[]),(0,o.useEffect)((function(){u.W.on("created",(function(e){t(e),h.push(e)}));var n=function(n,o){o?e((0,r.jsx)(c.Z,{id:l})):(t(n),h.push(n))};return u.W.on("joined",n),function(){u.W.off("created"),u.W.off("joined",n)}}),[e,l,h,t]),(0,o.useEffect)((function(){u.W.emit("leave_room"),t("")}),[t]);return(0,r.jsxs)("div",{className:"flex flex-col items-center py-24",children:[(0,r.jsx)("h1",{className:"text-5xl font-extrabold leading-tight sm:text-extra",children:"Digiboard"}),(0,r.jsx)("h3",{className:"text-xl sm:text-2xl",children:"Real-time whiteboard"}),(0,r.jsxs)("div",{className:"mt-10 flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"self-start font-bold leading-tight",children:"Enter your name"}),(0,r.jsx)("input",{className:"input",id:"room-id",placeholder:"Username...",value:m,onChange:function(e){return v(e.target.value.slice(0,15))}})]}),(0,r.jsx)("div",{className:"my-8 h-px w-96 bg-zinc-200"}),(0,r.jsxs)("form",{className:"flex flex-col items-center gap-3",onSubmit:function(e){e.preventDefault(),l&&u.W.emit("join_room",l,m)},children:[(0,r.jsx)("label",{htmlFor:"room-id",className:"self-start font-bold leading-tight",children:"Enter room id"}),(0,r.jsx)("input",{className:"input",id:"room-id",placeholder:"Room id...",value:l,onChange:function(e){return f(e.target.value)}}),(0,r.jsx)("button",{className:"btn",type:"submit",children:"Join"})]}),(0,r.jsxs)("div",{className:"my-8 flex w-96 items-center gap-2",children:[(0,r.jsx)("div",{className:"h-px w-full bg-zinc-200"}),(0,r.jsx)("p",{className:"text-zinc-400",children:"or"}),(0,r.jsx)("div",{className:"h-px w-full bg-zinc-200"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)("h5",{className:"self-start font-bold leading-tight",children:"Create new room"}),(0,r.jsx)("button",{className:"btn",onClick:function(){u.W.emit("create_room",m)},children:"Create"})]})]})},f=function(){return(0,r.jsx)(l,{})}}},function(e){e.O(0,[617,871,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);